<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI RISK DASHBOARD - p(DOOM) Exponential Curve</title>
<script src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>
<style>
  * {margin:0;padding:0;box-sizing:border-box;}
  body {
    background:#000;
    color:#0f0;
    font-family:'Courier New',Consolas,monospace;
    overflow:hidden;
  }

  canvas {position:absolute;top:0;left:0;}
  #shader {z-index:1;}

  #container {
    position:relative;
    z-index:10;
    width:100vw;
    height:100vh;
  }

  #header {
    background:rgba(0,20,10,0.95);
    border-bottom:2px solid #0f0;
    padding:12px 20px;
    display:flex;
    justify-content:space-between;
    box-shadow:0 0 30px rgba(0,255,0,0.5);
  }

  #header h1 {
    font-size:22px;
    text-shadow:0 0 15px #0f0;
    letter-spacing:3px;
  }

  #mainGrid {
    display:grid;
    grid-template-columns: 280px 1fr 280px;
    grid-template-rows: auto 1fr;
    gap:15px;
    height:calc(100vh - 60px);
    padding:15px;
  }

  #controls {
    grid-column:1 / -1;
    background:rgba(0,20,10,0.9);
    border:2px solid #0f0;
    border-radius:5px;
    padding:12px;
    display:flex;
    gap:20px;
    flex-wrap:wrap;
    box-shadow:0 0 25px rgba(0,255,0,0.3);
  }

  #controls label {
    display:flex;
    align-items:center;
    gap:10px;
    font-size:12px;
    color:#0cf;
    text-shadow:0 0 5px #0cf;
  }

  #controls input[type="range"] {width:140px;}
  #controls .value {
    min-width:60px;
    color:#0f0;
    font-weight:bold;
    text-shadow:0 0 8px #0f0;
  }

  .metricPanel {
    background:rgba(0,15,10,0.9);
    border:2px solid #0f0;
    border-radius:5px;
    padding:12px;
    overflow-y:auto;
    box-shadow:0 0 25px rgba(0,255,0,0.3);
  }

  #leftPanel {grid-column:1;grid-row:2;}
  #rightPanel {grid-column:3;grid-row:2;}

  .metric {
    margin-bottom:12px;
    padding:10px;
    background:rgba(0,30,15,0.7);
    border-left:4px solid #0f0;
    position:relative;
  }

  .metric.critical {
    border-left-color:#f00;
  }

  .metric.warning {
    border-left-color:#fa0;
  }

  .metric-label {
    font-size:10px;
    color:#0a8;
    text-transform:uppercase;
    margin-bottom:5px;
  }

  .metric-value {
    font-size:20px;
    font-weight:bold;
    text-shadow:0 0 10px currentColor;
  }

  #graphContainer {
    grid-column:2;
    grid-row:2;
    background:rgba(0,10,5,0.85);
    border:3px solid #0f0;
    border-radius:5px;
    padding:15px;
    position:relative;
    box-shadow:0 0 40px rgba(0,255,0,0.4) inset,
               0 0 40px rgba(0,255,0,0.3);
  }

  #pdoomGraph {
    width:100%;
    height:100%;
  }

  /* Scanlines */
  #scanlines {
    position:absolute;
    top:0;left:0;
    width:100%;height:100%;
    background:repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0,255,0,0.05) 2px,
      rgba(0,255,0,0.05) 4px
    );
    pointer-events:none;
    z-index:100;
    animation:scan 10s linear infinite;
  }

  @keyframes scan {
    0% {transform:translateY(0);}
    100% {transform:translateY(4px);}
  }

  ::-webkit-scrollbar {width:8px;}
  ::-webkit-scrollbar-track {background:rgba(0,20,10,0.5);}
  ::-webkit-scrollbar-thumb {background:#0f0;border-radius:4px;}
</style>
</head>
<body>

<canvas id="shader"></canvas>

<div id="container">
  <div id="header">
    <h1>⚠ AI EXISTENTIAL RISK MONITORING SYSTEM ⚠</h1>
    <div id="timestamp" style="color:#0cf;text-shadow:0 0 8px #0cf;"></div>
  </div>

  <div id="mainGrid">
    <div id="controls">
      <label>
        Exponent (b):
        <input type="range" id="expSlider" min="0.5" max="5" step="0.01" value="2">
        <span class="value" id="expVal">2.00</span>
      </label>

      <label>
        X-Offset (Δx):
        <input type="range" id="offsetSlider" min="-3" max="3" step="0.01" value="0">
        <span class="value" id="offsetVal">0.00</span>
      </label>

      <label>
        Shift Top (δ):
        <input type="range" id="shiftSlider" min="-1" max="1" step="0.01" value="0">
        <span class="value" id="shiftVal">0.00</span>
      </label>

      <label>
        Noise Amplitude:
        <input type="range" id="noiseSlider" min="0" max="0.1" step="0.001" value="0.02">
        <span class="value" id="noiseVal">0.02</span>
      </label>

      <label>
        Shader Chaos:
        <input type="range" id="chaosSlider" min="3" max="15" step="0.5" value="8">
        <span class="value" id="chaosVal">8.0</span>
      </label>
    </div>

    <div id="leftPanel" class="metricPanel">
      <div class="metric critical">
        <div class="metric-label">⚠ CURRENT p(DOOM)</div>
        <div class="metric-value" style="color:#f00;" id="pdoomCurrent">0.453</div>
      </div>

      <div class="metric warning">
        <div class="metric-label">⚡ AGI TIMELINE</div>
        <div class="metric-value" style="color:#fa0;">2027-Q3</div>
      </div>

      <div class="metric critical">
        <div class="metric-label">AI CAPABILITY INDEX</div>
        <div class="metric-value" style="color:#f00;">914.7</div>
      </div>

      <div class="metric">
        <div class="metric-label">ALIGNMENT PROGRESS</div>
        <div class="metric-value" style="color:#0f0;">18.3%</div>
      </div>

      <div class="metric critical">
        <div class="metric-label">⚠ DECEPTION INCIDENTS</div>
        <div class="metric-value" style="color:#f00;" id="incidents">1,247</div>
      </div>

      <div class="metric">
        <div class="metric-label">SAFETY FUNDING</div>
        <div class="metric-value" style="color:#0cf;">$3.2B</div>
      </div>

      <div class="metric warning">
        <div class="metric-label">COMPUTE (FLOPS)</div>
        <div class="metric-value" style="color:#fa0;">7.2e26</div>
      </div>

      <div class="metric">
        <div class="metric-label">SAFETY RESEARCHERS</div>
        <div class="metric-value" style="color:#0cf;">5,892</div>
      </div>
    </div>

    <div id="graphContainer">
      <div id="pdoomGraph"></div>
    </div>

    <div id="rightPanel" class="metricPanel">
      <div class="metric">
        <div class="metric-label">ACTIVE AI LABS</div>
        <div class="metric-value" style="color:#0f0;">2,441</div>
      </div>

      <div class="metric critical">
        <div class="metric-label">⚠ RACE DYNAMICS</div>
        <div class="metric-value" style="color:#f00;">9.2/10</div>
      </div>

      <div class="metric warning">
        <div class="metric-label">UNALIGNED SYSTEMS</div>
        <div class="metric-value" style="color:#fa0;">587</div>
      </div>

      <div class="metric warning">
        <div class="metric-label">REGULATION INDEX</div>
        <div class="metric-value" style="color:#fa0;">2.8/10</div>
      </div>

      <div class="metric">
        <div class="metric-label">PUBLIC AWARENESS</div>
        <div class="metric-value" style="color:#0f0;">71%</div>
      </div>

      <div class="metric critical">
        <div class="metric-label">⚡ X-RISK LEVEL</div>
        <div class="metric-value" style="color:#f00;">SEVERE</div>
      </div>

      <div class="metric warning">
        <div class="metric-label">COOPERATION SCORE</div>
        <div class="metric-value" style="color:#fa0;">3.4/10</div>
      </div>

      <div class="metric">
        <div class="metric-label">DAYS TO AGI</div>
        <div class="metric-value" style="color:#fa0;" id="daysToAGI">721</div>
      </div>
    </div>
  </div>
</div>

<div id="scanlines"></div>

<script>
/* ========== CHAOTIC WEB SHADER ========== */
const shaderCanvas = document.getElementById('shader');
const gl = shaderCanvas.getContext('webgl');

function resizeShader() {
  shaderCanvas.width = window.innerWidth;
  shaderCanvas.height = window.innerHeight;
  if(gl) gl.viewport(0, 0, shaderCanvas.width, shaderCanvas.height);
}
window.addEventListener('resize', resizeShader);
resizeShader();

const vsSource = `
  attribute vec2 pos;
  void main() { gl_Position = vec4(pos, 0.0, 1.0); }
`;

const fsSource = `
  precision highp float;
  uniform vec2 resolution;
  uniform float time;
  uniform float chaos;

  float hash(vec2 p) {
    p = fract(p * vec2(234.34, 435.345));
    p += dot(p, p + 34.23);
    return fract(p.x * p.y);
  }

  float noise(vec2 p) {
    vec2 i = floor(p);
    vec2 f = fract(p);
    f = f * f * (3.0 - 2.0 * f);
    float a = hash(i);
    float b = hash(i + vec2(1.0, 0.0));
    float c = hash(i + vec2(0.0, 1.0));
    float d = hash(i + vec2(1.0, 1.0));
    return mix(mix(a, b, f.x), mix(c, d, f.x), f.y);
  }

  float fbm(vec2 p) {
    float value = 0.0;
    float amplitude = 0.5;
    for(int i = 0; i < 6; i++) {
      value += amplitude * noise(p);
      p *= 2.0;
      amplitude *= 0.5;
    }
    return value;
  }

  float chaoticWeb(vec2 p, float t) {
    float pattern = 0.0;

    for(float i = 0.0; i < chaos; i++) {
      float layer = i / chaos;
      vec2 grid = fract(p * (6.0 + i * 3.0)) - 0.5;
      float d = length(grid);

      // Pulsing nodes
      float pulse = 0.5 + 0.5 * sin(t * (1.5 + i * 0.3) + d * 8.0);
      pattern += smoothstep(0.3, 0.1, d) * pulse * 0.4;

      // Web lines
      pattern += smoothstep(0.015, 0.0, abs(grid.x)) * (0.3 + 0.2 * sin(t * 2.0 + p.y * 4.0));
      pattern += smoothstep(0.015, 0.0, abs(grid.y)) * (0.3 + 0.2 * sin(t * 2.0 + p.x * 4.0));

      // Diagonal connections
      pattern += smoothstep(0.015, 0.0, abs(grid.x - grid.y)) * 0.2;
      pattern += smoothstep(0.015, 0.0, abs(grid.x + grid.y)) * 0.2;
    }

    return pattern;
  }

  void main() {
    vec2 uv = gl_FragCoord.xy / resolution;
    vec2 p = uv * 2.0 - 1.0;
    p.x *= resolution.x / resolution.y;

    float t = time * 0.3;

    // Flow field
    vec2 flow = vec2(
      fbm(p * 1.5 + t * 0.1),
      fbm(p * 1.5 + t * 0.1 + 100.0)
    );

    // Chaotic web
    float web = chaoticWeb(p + flow * 0.4, t);

    // Organic layer
    float organic = fbm(p * 3.0 + flow * 0.5 + t * 0.2) * 0.4;

    float pattern = web + organic;

    // Color: bright green web
    vec3 color1 = vec3(0.0, 1.0, 0.1);
    vec3 color2 = vec3(0.0, 0.7, 0.6);
    vec3 color3 = vec3(0.0, 0.4, 0.3);
    vec3 color = mix(color3, mix(color1, color2, web), pattern);

    // Pulsing
    color *= 0.6 + 0.4 * sin(t * 3.0 + pattern * 8.0);

    // Vignette
    float vignette = smoothstep(1.8, 0.3, length(p));
    color *= vignette;

    // Keep it bright and visible
    color *= 0.7;

    gl_FragColor = vec4(color, 1.0);
  }
`;

function compileShader(source, type) {
  const shader = gl.createShader(type);
  gl.shaderSource(shader, source);
  gl.compileShader(shader);
  return shader;
}

const vs = compileShader(vsSource, gl.VERTEX_SHADER);
const fs = compileShader(fsSource, gl.FRAGMENT_SHADER);
const program = gl.createProgram();
gl.attachShader(program, vs);
gl.attachShader(program, fs);
gl.linkProgram(program);
gl.useProgram(program);

const positions = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]);
const buffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
gl.bufferData(gl.ARRAY_BUFFER, positions, gl.STATIC_DRAW);

const posLoc = gl.getAttribLocation(program, 'pos');
gl.enableVertexAttribArray(posLoc);
gl.vertexAttribPointer(posLoc, 2, gl.FLOAT, false, 0, 0);

const resolutionLoc = gl.getUniformLocation(program, 'resolution');
const timeLoc = gl.getUniformLocation(program, 'time');
const chaosLoc = gl.getUniformLocation(program, 'chaos');

let startTime = Date.now();
let currentChaos = 8.0;

function animateShader() {
  const time = (Date.now() - startTime) * 0.001;
  gl.uniform2f(resolutionLoc, shaderCanvas.width, shaderCanvas.height);
  gl.uniform1f(timeLoc, time);
  gl.uniform1f(chaosLoc, currentChaos);
  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
  requestAnimationFrame(animateShader);
}
animateShader();

/* ========== EXPONENTIAL CURVE GRAPH ========== */
const expSlider = document.getElementById('expSlider');
const offsetSlider = document.getElementById('offsetSlider');
const shiftSlider = document.getElementById('shiftSlider');
const noiseSlider = document.getElementById('noiseSlider');
const chaosSlider = document.getElementById('chaosSlider');

function randGauss() {
  let u = 0, v = 0;
  while(u === 0) u = Math.random();
  while(v === 0) v = Math.random();
  return Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
}

function computeC(b) {
  return 1 - Math.pow(2027, b);
}

function generatePdoomCurve() {
  const b = parseFloat(expSlider.value);
  const dx = parseFloat(offsetSlider.value);
  const dTop = parseFloat(shiftSlider.value);
  const noiseA = parseFloat(noiseSlider.value);
  const C = computeC(b);

  const xs = [], ys = [];

  for(let yr = 2020; yr <= 2030; yr += 0.02) {
    const x = yr + dx;
    let y = Math.pow(x, b) + C;
    y = Math.max(0, Math.min(1, y));

    // Shift top half
    if(y > 0.5) y = Math.min(1, y + dTop);

    // Add noise
    const noise = noiseA * randGauss();
    y = Math.max(0, Math.min(1, y + noise));

    xs.push(yr);
    ys.push(y);
  }

  return {x: xs, y: ys};
}

function drawGraph() {
  const data = generatePdoomCurve();

  const trace = {
    x: data.x,
    y: data.y,
    mode: 'lines',
    line: {
      width: 5,
      color: 'rgb(0, 255, 0)',
      shape: 'spline'
    },
    name: 'p(DOOM)'
  };

  const layout = {
    title: {
      text: '<b>EXPONENTIAL p(DOOM) PROBABILITY CURVE</b>',
      font: {color: '#00ff00', size: 20},
      x: 0.5
    },
    paper_bgcolor: 'rgba(0,0,0,0)',
    plot_bgcolor: 'rgba(0,10,5,0.5)',
    xaxis: {
      title: {text: 'Year', font: {color: '#00ff00', size: 14}},
      range: [2020, 2030],
      tickfont: {color: '#00ff00'},
      gridcolor: '#00ff0030',
      zerolinecolor: '#00ff0060'
    },
    yaxis: {
      title: {text: 'p(DOOM) Probability', font: {color: '#ff0000', size: 14}},
      range: [0, 1],
      tickfont: {color: '#ff0000'},
      gridcolor: '#00ff0030',
      zerolinecolor: '#00ff0060'
    },
    margin: {l: 60, r: 20, b: 60, t: 60},
    font: {color: '#00ff00'}
  };

  Plotly.react('pdoomGraph', [trace], layout, {responsive: true});
}

/* ========== CONTROLS ========== */
function updateDisplays() {
  document.getElementById('expVal').textContent = parseFloat(expSlider.value).toFixed(2);
  document.getElementById('offsetVal').textContent = parseFloat(offsetSlider.value).toFixed(2);
  document.getElementById('shiftVal').textContent = parseFloat(shiftSlider.value).toFixed(2);
  document.getElementById('noiseVal').textContent = parseFloat(noiseSlider.value).toFixed(3);
  document.getElementById('chaosVal').textContent = parseFloat(chaosSlider.value).toFixed(1);

  currentChaos = parseFloat(chaosSlider.value);
}

[expSlider, offsetSlider, shiftSlider, noiseSlider, chaosSlider].forEach(el => {
  el.addEventListener('input', () => {
    updateDisplays();
    drawGraph();
  });
});

/* ========== REAL-TIME UPDATES ========== */
function updateMetrics() {
  const t = Date.now() / 1000;

  const pdoom = (0.453 + Math.sin(t / 10) * 0.05).toFixed(3);
  document.getElementById('pdoomCurrent').textContent = pdoom;

  const incidents = 1247 + Math.floor(Math.sin(t / 5) * 20);
  document.getElementById('incidents').textContent = incidents.toLocaleString();

  const days = 721 - Math.floor(t / 86400);
  document.getElementById('daysToAGI').textContent = days;

  const now = new Date();
  document.getElementById('timestamp').textContent = now.toISOString().substring(0, 19).replace('T', ' ');
}

setInterval(updateMetrics, 100);

/* ========== INITIALIZE ========== */
updateDisplays();
drawGraph();
updateMetrics();
</script>

</body>
</html>
