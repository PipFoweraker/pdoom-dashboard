<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI RISK MISSION CONTROL – p(DOOM) Dashboard</title>
<script src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>
<style>
  * {margin:0;padding:0;box-sizing:border-box;}
  body {
    background:#000;
    color:#0f0;
    font-family:'Courier New',Consolas,monospace;
    overflow:hidden;
    position:relative;
  }

  canvas {position:absolute;top:0;left:0;}
  #shader {z-index:1;}
  #container {position:relative;z-index:10;width:100vw;height:100vh;pointer-events:none;}
  #container > * {pointer-events:auto;}

  /* Top header bar */
  #header {
    background:linear-gradient(180deg, rgba(0,20,10,0.95) 0%, rgba(0,10,5,0.85) 100%);
    border-bottom:2px solid #0f0;
    padding:10px 20px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 0 20px rgba(0,255,0,0.4);
  }

  #header h1 {
    font-size:20px;
    text-shadow:0 0 10px #0f0;
    letter-spacing:2px;
  }

  #timestamp {
    font-size:14px;
    color:#0cf;
    text-shadow:0 0 5px #0cf;
  }

  /* Main grid layout */
  #mainGrid {
    display:grid;
    grid-template-columns: 250px 1fr 250px;
    grid-template-rows: 60px 1fr;
    gap:10px;
    height:calc(100vh - 72px);
    padding:10px;
  }

  /* Graph container */
  #graphContainer {
    grid-column:2;
    grid-row:2;
    background:rgba(0,10,5,0.7);
    border:2px solid #0f0;
    border-radius:5px;
    padding:10px;
    position:relative;
    overflow:hidden;
    box-shadow:0 0 30px rgba(0,255,0,0.3) inset;
  }

  #graph3d {
    width:100%;
    height:100%;
  }

  /* Metric panels */
  .metricPanel {
    background:rgba(0,15,10,0.85);
    border:1px solid #0f0;
    border-radius:4px;
    padding:10px;
    overflow-y:auto;
    box-shadow:0 0 15px rgba(0,255,0,0.2);
  }

  #leftPanel {
    grid-column:1;
    grid-row:2;
  }

  #rightPanel {
    grid-column:3;
    grid-row:2;
  }

  .metric {
    margin-bottom:15px;
    padding:8px;
    background:rgba(0,30,15,0.6);
    border-left:3px solid #0f0;
    animation:pulse 3s infinite;
  }

  .metric.critical {
    border-left-color:#f00;
    animation:pulseCritical 1s infinite;
  }

  .metric.warning {
    border-left-color:#fa0;
    animation:pulseWarning 2s infinite;
  }

  .metric-label {
    font-size:10px;
    color:#0a8;
    text-transform:uppercase;
    margin-bottom:4px;
  }

  .metric-value {
    font-size:18px;
    font-weight:bold;
    text-shadow:0 0 8px currentColor;
  }

  .metric-subtext {
    font-size:9px;
    color:#0a8;
    margin-top:4px;
  }

  @keyframes pulse {
    0%, 100% {opacity:0.8;}
    50% {opacity:1.0;}
  }

  @keyframes pulseCritical {
    0%, 100% {opacity:0.7;border-left-color:#f00;}
    50% {opacity:1.0;border-left-color:#f88;}
  }

  @keyframes pulseWarning {
    0%, 100% {opacity:0.8;border-left-color:#fa0;}
    50% {opacity:1.0;border-left-color:#fc8;}
  }

  /* Control panel */
  #controls {
    grid-column:1 / -1;
    grid-row:1;
    background:rgba(0,20,10,0.9);
    border:1px solid #0f0;
    border-radius:4px;
    padding:10px;
    display:flex;
    gap:15px;
    flex-wrap:wrap;
    align-items:center;
    box-shadow:0 0 15px rgba(0,255,0,0.2);
  }

  #controls label {
    display:flex;
    align-items:center;
    gap:8px;
    font-size:11px;
    color:#0cf;
  }

  #controls input[type="range"] {
    width:120px;
  }

  #controls .value-display {
    min-width:50px;
    text-align:right;
    color:#0f0;
    font-weight:bold;
  }

  /* Scan lines */
  #scanlines {
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:repeating-linear-gradient(
      0deg,
      transparent 0px,
      rgba(0,255,0,0.03) 1px,
      transparent 2px,
      transparent 4px
    );
    pointer-events:none;
    z-index:50;
    animation:scan 8s linear infinite;
  }

  @keyframes scan {
    0% {transform:translateY(0);}
    100% {transform:translateY(4px);}
  }

  /* Glitch overlay */
  .glitch {
    animation:glitchAnim 5s infinite;
  }

  @keyframes glitchAnim {
    0%, 100% {transform:translate(0);}
    10% {transform:translate(-2px, 2px);}
    20% {transform:translate(2px, -2px);}
    30% {transform:translate(-1px, 1px);}
    40% {transform:translate(1px, -1px);}
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {width:6px;}
  ::-webkit-scrollbar-track {background:rgba(0,20,10,0.5);}
  ::-webkit-scrollbar-thumb {background:#0f0;border-radius:3px;}
  ::-webkit-scrollbar-thumb:hover {background:#0f8;}
</style>
</head>
<body>

<canvas id="shader"></canvas>

<div id="container">
  <div id="header" class="glitch">
    <h1>⚠ AI RISK MISSION CONTROL ⚠</h1>
    <div id="timestamp">STARDATE: <span id="time"></span></div>
  </div>

  <div id="mainGrid">
    <!-- Control Panel -->
    <div id="controls">
      <label>
        Exponent (b):
        <input type="range" id="expSlider" min="0.5" max="5" step="0.01" value="2">
        <span class="value-display" id="expVal">2.00</span>
      </label>

      <label>
        X-Offset:
        <input type="range" id="offsetSlider" min="-3" max="3" step="0.01" value="0">
        <span class="value-display" id="offsetVal">0.00</span>
      </label>

      <label>
        Noise:
        <input type="range" id="noiseSlider" min="0" max="0.1" step="0.001" value="0.02">
        <span class="value-display" id="noiseVal">0.02</span>
      </label>

      <label>
        Chaos:
        <input type="range" id="chaosSlider" min="1" max="10" step="0.1" value="5">
        <span class="value-display" id="chaosVal">5.0</span>
      </label>
    </div>

    <!-- Left Metrics Panel -->
    <div id="leftPanel" class="metricPanel">
      <div class="metric critical">
        <div class="metric-label">⚠ Current p(DOOM)</div>
        <div class="metric-value" style="color:#f00;" id="currentPdoom">0.347</div>
        <div class="metric-subtext">+2.4% from yesterday</div>
      </div>

      <div class="metric">
        <div class="metric-label">AGI Timeline Estimate</div>
        <div class="metric-value" style="color:#fa0;" id="agiDate">2027-08-14</div>
        <div class="metric-subtext">867 days remaining</div>
      </div>

      <div class="metric warning">
        <div class="metric-label">⚡ AI Capability Index</div>
        <div class="metric-value" style="color:#fa0;" id="capIndex">847.2</div>
        <div class="metric-subtext">Accelerating exponentially</div>
      </div>

      <div class="metric">
        <div class="metric-label">Safety Research Funding</div>
        <div class="metric-value" style="color:#0cf;">$2.4B</div>
        <div class="metric-subtext">0.12% of AI investment</div>
      </div>

      <div class="metric">
        <div class="metric-label">Alignment Progress</div>
        <div class="metric-value" style="color:#0f0;">14.2%</div>
        <div class="metric-subtext">Behind schedule by 3 years</div>
      </div>

      <div class="metric critical">
        <div class="metric-label">⚠ Deceptive AI Incidents</div>
        <div class="metric-value" style="color:#f00;" id="incidentCount">847</div>
        <div class="metric-subtext">+12 this week</div>
      </div>

      <div class="metric">
        <div class="metric-label">Global Compute (FLOPS)</div>
        <div class="metric-value" style="color:#0cf;" id="globalCompute">4.7e26</div>
        <div class="metric-subtext">Doubling every 6 months</div>
      </div>
    </div>

    <!-- 3D Graph Container -->
    <div id="graphContainer">
      <div id="graph3d"></div>
    </div>

    <!-- Right Metrics Panel -->
    <div id="rightPanel" class="metricPanel">
      <div class="metric">
        <div class="metric-label">Active AI Labs</div>
        <div class="metric-value" style="color:#0f0;">1,847</div>
        <div class="metric-subtext">+147 this quarter</div>
      </div>

      <div class="metric warning">
        <div class="metric-label">⚠ Unaligned Systems</div>
        <div class="metric-value" style="color:#fa0;">423</div>
        <div class="metric-subtext">23% of total deployed</div>
      </div>

      <div class="metric">
        <div class="metric-label">Safety Researchers</div>
        <div class="metric-value" style="color:#0cf;">4,291</div>
        <div class="metric-subtext">vs 127,849 AI engineers</div>
      </div>

      <div class="metric critical">
        <div class="metric-label">⚠ Race Dynamics Score</div>
        <div class="metric-value" style="color:#f00;">8.7/10</div>
        <div class="metric-subtext">Extremely competitive</div>
      </div>

      <div class="metric">
        <div class="metric-label">Regulation Index</div>
        <div class="metric-value" style="color:#fa0;">3.2/10</div>
        <div class="metric-subtext">Insufficient oversight</div>
      </div>

      <div class="metric">
        <div class="metric-label">Public Awareness</div>
        <div class="metric-value" style="color:#0f0;">67%</div>
        <div class="metric-subtext">+4% this month</div>
      </div>

      <div class="metric critical">
        <div class="metric-label">⚡ Existential Risk Level</div>
        <div class="metric-value" style="color:#f00;" id="xrisk">CRITICAL</div>
        <div class="metric-subtext">Immediate action required</div>
      </div>

      <div class="metric">
        <div class="metric-label">Cooperation Score</div>
        <div class="metric-value" style="color:#fa0;">4.1/10</div>
        <div class="metric-subtext">Labs competing aggressively</div>
      </div>
    </div>
  </div>
</div>

<div id="scanlines"></div>

<script>
/* ========== WebGL Chaotic Web Shader ========== */
const shaderCanvas = document.getElementById('shader');
const gl = shaderCanvas.getContext('webgl');

function resizeShader() {
  shaderCanvas.width = window.innerWidth;
  shaderCanvas.height = window.innerHeight;
  if(gl) gl.viewport(0, 0, shaderCanvas.width, shaderCanvas.height);
}
window.addEventListener('resize', resizeShader);
resizeShader();

const vsSource = `
  attribute vec2 pos;
  void main() {
    gl_Position = vec4(pos, 0.0, 1.0);
  }
`;

// Chaotic web shader - extremely busy
const fsSource = `
  precision highp float;
  uniform vec2 resolution;
  uniform float time;
  uniform float chaos;

  float hash(vec2 p) {
    p = fract(p * vec2(234.34, 435.345));
    p += dot(p, p + 34.23);
    return fract(p.x * p.y);
  }

  float noise(vec2 p) {
    vec2 i = floor(p);
    vec2 f = fract(p);
    f = f * f * (3.0 - 2.0 * f);
    float a = hash(i);
    float b = hash(i + vec2(1.0, 0.0));
    float c = hash(i + vec2(0.0, 1.0));
    float d = hash(i + vec2(1.0, 1.0));
    return mix(mix(a, b, f.x), mix(c, d, f.x), f.y);
  }

  float fbm(vec2 p) {
    float value = 0.0;
    float amplitude = 0.5;
    for(int i = 0; i < 6; i++) {
      value += amplitude * noise(p);
      p *= 2.0;
      amplitude *= 0.5;
    }
    return value;
  }

  // Chaotic web pattern
  float web(vec2 p, float t) {
    float pattern = 0.0;

    // Multiple layers of circuit-like patterns
    for(float i = 0.0; i < chaos; i++) {
      vec2 grid = fract(p * (8.0 + i * 2.0)) - 0.5;
      float d = length(grid);

      // Pulsing nodes
      float pulse = 0.5 + 0.5 * sin(t * (2.0 + i * 0.5) + d * 10.0);
      pattern += smoothstep(0.25, 0.15, d) * pulse * 0.3;

      // Web traces
      pattern += smoothstep(0.02, 0.0, abs(grid.x)) * (0.2 + 0.1 * sin(t * 3.0 + p.y * 5.0));
      pattern += smoothstep(0.02, 0.0, abs(grid.y)) * (0.2 + 0.1 * sin(t * 3.0 + p.x * 5.0));

      // Diagonal connections
      pattern += smoothstep(0.02, 0.0, abs(grid.x - grid.y)) * 0.15;
      pattern += smoothstep(0.02, 0.0, abs(grid.x + grid.y)) * 0.15;
    }

    return pattern;
  }

  void main() {
    vec2 uv = gl_FragCoord.xy / resolution;
    vec2 p = uv * 2.0 - 1.0;
    p.x *= resolution.x / resolution.y;

    float t = time * 0.3;

    // Chaotic flow field
    vec2 flow = vec2(
      fbm(p * 2.0 + t * 0.1),
      fbm(p * 2.0 + t * 0.1 + 100.0)
    );

    // Web pattern with flow
    float webPattern = web(p + flow * 0.3, t);

    // Additional organic layer
    float organic = fbm(p * 4.0 + flow * 0.5 + t * 0.2) * 0.3;

    // Combine
    float pattern = webPattern + organic;

    // Color: green to cyan tech web
    vec3 color1 = vec3(0.0, 0.8, 0.1);
    vec3 color2 = vec3(0.0, 0.6, 0.8);
    vec3 color3 = vec3(0.0, 0.3, 0.5);
    vec3 color = mix(color3, mix(color1, color2, webPattern), pattern);

    // Pulsing energy
    color *= 0.7 + 0.3 * sin(t * 4.0 + pattern * 10.0);

    // Vignette
    float vignette = smoothstep(1.5, 0.2, length(p));
    color *= vignette;

    // Dim for background
    color *= 0.4;

    gl_FragColor = vec4(color, 1.0);
  }
`;

function compileShader(source, type) {
  const shader = gl.createShader(type);
  gl.shaderSource(shader, source);
  gl.compileShader(shader);
  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
    console.error('Shader error:', gl.getShaderInfoLog(shader));
    return null;
  }
  return shader;
}

const vs = compileShader(vsSource, gl.VERTEX_SHADER);
const fs = compileShader(fsSource, gl.FRAGMENT_SHADER);
const program = gl.createProgram();
gl.attachShader(program, vs);
gl.attachShader(program, fs);
gl.linkProgram(program);
gl.useProgram(program);

const positions = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]);
const buffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
gl.bufferData(gl.ARRAY_BUFFER, positions, gl.STATIC_DRAW);

const posLoc = gl.getAttribLocation(program, 'pos');
gl.enableVertexAttribArray(posLoc);
gl.vertexAttribPointer(posLoc, 2, gl.FLOAT, false, 0, 0);

const resolutionLoc = gl.getUniformLocation(program, 'resolution');
const timeLoc = gl.getUniformLocation(program, 'time');
const chaosLoc = gl.getUniformLocation(program, 'chaos');

let startTime = Date.now();
let currentChaos = 5.0;

function animateShader() {
  const time = (Date.now() - startTime) * 0.001;
  gl.uniform2f(resolutionLoc, shaderCanvas.width, shaderCanvas.height);
  gl.uniform1f(timeLoc, time);
  gl.uniform1f(chaosLoc, currentChaos);
  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
  requestAnimationFrame(animateShader);
}
animateShader();

/* ========== 3D Graph ========== */
const expSlider = document.getElementById('expSlider');
const offsetSlider = document.getElementById('offsetSlider');
const noiseSlider = document.getElementById('noiseSlider');
const chaosSlider = document.getElementById('chaosSlider');

function randGauss() {
  let u = 0, v = 0;
  while(u === 0) u = Math.random();
  while(v === 0) v = Math.random();
  return Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
}

function computeC(b) {
  return 1 - Math.pow(2027, b);
}

function generate3DData() {
  const b = parseFloat(expSlider.value);
  const dx = parseFloat(offsetSlider.value);
  const noiseA = parseFloat(noiseSlider.value);
  const C = computeC(b);

  const xs = [], ys = [], zs = [];

  // Create 3D surface with time dimension
  for(let yr = 2020; yr <= 2030; yr += 0.1) {
    for(let scenario = -1; scenario <= 1; scenario += 0.1) {
      const x = yr + dx;
      let y = Math.pow(x, b) + C;
      y = Math.max(0, Math.min(1, y));

      // Add scenario variation
      y += scenario * 0.1 * (1 - Math.abs(scenario));

      // Add noise
      const noise = noiseA * randGauss();
      y = Math.max(0, Math.min(1, y + noise));

      xs.push(yr);
      ys.push(scenario);
      zs.push(y);
    }
  }

  return {x: xs, y: ys, z: zs};
}

function draw3D() {
  const data = generate3DData();

  const trace = {
    x: data.x,
    y: data.y,
    z: data.z,
    mode: 'markers',
    type: 'scatter3d',
    marker: {
      size: 2,
      color: data.z,
      colorscale: [
        [0, 'rgb(0, 255, 0)'],
        [0.5, 'rgb(255, 170, 0)'],
        [1, 'rgb(255, 0, 0)']
      ],
      showscale: true,
      colorbar: {
        title: 'p(DOOM)',
        titlefont: {color: '#0f0'},
        tickfont: {color: '#0f0'}
      }
    }
  };

  const layout = {
    title: {
      text: '<b>3D p(DOOM) PROBABILITY SURFACE</b>',
      font: {color: '#0f0', size: 18}
    },
    paper_bgcolor: 'rgba(0,0,0,0)',
    plot_bgcolor: 'rgba(0,10,5,0.3)',
    scene: {
      xaxis: {
        title: 'Year',
        titlefont: {color: '#0cf'},
        tickfont: {color: '#0cf'},
        gridcolor: '#0f03',
        zerolinecolor: '#0f06'
      },
      yaxis: {
        title: 'Scenario',
        titlefont: {color: '#0cf'},
        tickfont: {color: '#0cf'},
        gridcolor: '#0f03',
        zerolinecolor: '#0f06'
      },
      zaxis: {
        title: 'p(DOOM)',
        titlefont: {color: '#f00'},
        tickfont: {color: '#f00'},
        gridcolor: '#0f03',
        zerolinecolor: '#0f06',
        range: [0, 1]
      },
      bgcolor: 'rgba(0,0,0,0)',
      camera: {
        eye: {x: 1.5, y: 1.5, z: 1.3}
      }
    },
    margin: {l: 0, r: 0, b: 0, t: 40}
  };

  Plotly.react('graph3d', [trace], layout, {responsive: true});
}

/* ========== Controls ========== */
function updateDisplays() {
  document.getElementById('expVal').textContent = parseFloat(expSlider.value).toFixed(2);
  document.getElementById('offsetVal').textContent = parseFloat(offsetSlider.value).toFixed(2);
  document.getElementById('noiseVal').textContent = parseFloat(noiseSlider.value).toFixed(3);
  document.getElementById('chaosVal').textContent = parseFloat(chaosSlider.value).toFixed(1);

  currentChaos = parseFloat(chaosSlider.value);
}

[expSlider, offsetSlider, noiseSlider, chaosSlider].forEach(el => {
  el.addEventListener('input', () => {
    updateDisplays();
    draw3D();
  });
});

/* ========== Real-time updates ========== */
function updateMetrics() {
  const time = Date.now();

  // Simulate changing metrics
  const pdoom = (0.347 + Math.sin(time / 10000) * 0.05).toFixed(3);
  document.getElementById('currentPdoom').textContent = pdoom;

  const incidents = 847 + Math.floor(Math.sin(time / 5000) * 10);
  document.getElementById('incidentCount').textContent = incidents;

  const compute = (4.7e26 * (1 + Math.sin(time / 8000) * 0.1)).toExponential(1);
  document.getElementById('globalCompute').textContent = compute;

  // Update timestamp
  const now = new Date();
  document.getElementById('time').textContent = now.toISOString().replace('T', ' ').substring(0, 19);
}

setInterval(updateMetrics, 100);

/* ========== Initialize ========== */
updateDisplays();
draw3D();
updateMetrics();
</script>

</body>
</html>
